# Android実機およびエミュレータでの動作テストガイド

現状の環境（Android Studioなし）でAndroidアプリとしての動作を「正確に」テストし、リリース可能な状態にするには、**Android Studioのインストールを強く推奨**します。

Capacitor（本アプリで使用している技術）は、AndroidアプリをビルドするためにAndroid SDKとGradleというツールを必要とします。これらはAndroid Studioに含まれており、コマンドラインだけでこれらを管理するのは非常に複雑でトラブルが起きやすいためです。

以下に、Android Studioを導入して実機でテストする手順をまとめました。

## 1. 準備：Android Studioのインストール

1. [公式サイト](https://developer.android.com/studio) から「Android Studio」をダウンロードしてインストールしてください。
2. インストール時のセットアップウィザードでは「Standard」を選択し、SDKなどを自動でインストールさせます。
3. インストール完了後、Android Studioを起動します。

## 2. プロジェクトの準備（コマンド操作）

コマンドプロンプト（またはPowerShell）で、アプリのディレクトリ（`math-app`がある場所）に移動し、以下のコマンドを順番に実行します。これにより、Androidアプリとしてのプロジェクトファイルが作成されます。

```bash
# 0. 依存関係のインストール（初回のみ）
npm install

# 1. Webアプリのビルド（最新のコードをdistフォルダに出力）
npm run build

# 2. CapacitorのAndroidプラットフォームを追加（初回のみ）
npx cap add android

# 3. Webのビルド内容をAndroidプロジェクトに同期
npx cap sync
```

## 3. Android Studioでの立ち上げ

以下のコマンドを実行すると、作成されたAndroidプロジェクトがAndroid Studioで開きます。

```bash
npx cap open android
```

Android Studioが起動し、プロジェクトの読み込み（Gradle Sync）が始まります。右下のバーなどで処理が終わるまで待ちます（初回は時間がかかります）。

## 4. 実機でのテスト方法

お手持ちのAndroidスマートフォンでテストする手順です。

### 4.1 スマートフォンの設定（開発者モード）
1. スマホの「設定」>「デバイス情報」>「ビルド番号」を**7回連続タップ**します。「開発者モードになりました」と出ればOKです。
2. 「設定」>「システム」>「開発者向けオプション」を開き、**「USBデバッグ」をON**にします。

### 4.2 PCと接続して実行
1. PCとスマホをUSBケーブルで接続します。
2. スマホ側に「USBデバッグを許可しますか？」と出るので「許可」を押します。
3. Android Studioの画面上部のデバイス選択プルダウンに、あなたのスマホ名が表示されます。
4. その横にある緑色の「▶ (Run)」ボタンを押します。
5. ビルドが始まり、成功するとスマホ上でアプリが自動的に起動します。

## 5. エミュレータでのテスト方法（実機がない場合）

1. Android Studio右上の「Device Manager」を開きます。
2. 「Create Device」を押し、適当な端末（例: Pixel 6）を選択して進めます。
3. System Image（OSバージョン）の横にある「Download」を押してダウンロードし、Nextで作成完了します。
4. デバイス選択プルダウンから作成したエミュレータを選び、「▶ (Run)」ボタンを押します。

---

これで、Google Playストアに公開するものとほぼ同等の状態でアプリを確認できます。
特に以下の点を確認してください：
- アイコンが正しく表示されるか
- 画面サイズが変わってもレイアウトが崩れないか
- テンキーのタップ反応が良いか
